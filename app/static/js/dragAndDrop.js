"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classPrivateFieldLooseBase(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var id=0;function _classPrivateFieldLooseKey(e){return"__private_"+id+++"_"+e}var DragAndDrop=function e(t,r,o){var a=this;_classCallCheck(this,e),this.state={el:void 0,form:void 0,action:!1,message:""},this.init=function(e,t,r){a.state.el=r?"object"==_typeof(r)?r:"string"==typeof r?document.querySelector(r):void 0:void 0,a.state.form=_classPrivateFieldLooseBase(a,_createForm)[_createForm](e,t),a.state.message=t},Object.defineProperty(this,_createForm,{writable:!0,value:function(e,t){var r=document.createElement("div");r.classList="drag-and-drop-form",r.innerHTML='\n\t\t\t\t<input type="file" name="'.concat(e,'" id="drAndDrp').concat(e,'" class="js-dragAndDrop" multiple />\n    \t\t\t<label class="drag-and-drop__label" for="drAndDrp').concat(e,'">').concat(t,"</label>\n\t\t\t"),r.addEventListener("change",_classPrivateFieldLooseBase(a,_changeFormForActionInp)[_changeFormForActionInp],!1);var o=r.querySelector("label");return o.addEventListener("mouseover",_classPrivateFieldLooseBase(a,_showRemoveFiles)[_showRemoveFiles],!1),o.addEventListener("mouseout",_classPrivateFieldLooseBase(a,_unshowRemoveFiles)[_unshowRemoveFiles],!1),o.addEventListener("click",_classPrivateFieldLooseBase(a,_removeFiles)[_removeFiles],!1),r}}),Object.defineProperty(this,_createEvents,{writable:!0,value:function(){var e=a.state.el;["dragenter","dragover","dragleave","drop"].forEach(function(t){e.addEventListener(t,_classPrivateFieldLooseBase(a,_preventDefaults)[_preventDefaults],!1)}),["dragenter","dragover"].forEach(function(t){e.addEventListener(t,_classPrivateFieldLooseBase(a,_highlight)[_highlight],!1)}),["dragleave","drop"].forEach(function(t){e.addEventListener(t,_classPrivateFieldLooseBase(a,_unhighlight)[_unhighlight],!1)}),e.addEventListener("drop",_classPrivateFieldLooseBase(a,_handleDrop)[_handleDrop],!1)}}),Object.defineProperty(this,_preventDefaults,{writable:!0,value:function(e){e.preventDefault(),e.stopPropagation()}}),Object.defineProperty(this,_highlight,{writable:!0,value:function(e){var t=a.state.form;t.classList.add("drag-and-drop__highlight"),t.querySelector("label").innerHTML="Отпустите файл!"}}),Object.defineProperty(this,_unhighlight,{writable:!0,value:function(e){var t=a.state,r=t.form,o=t.message;r.classList.remove("drag-and-drop__highlight"),r.querySelector("label").innerHTML=o}}),Object.defineProperty(this,_handleDrop,{writable:!0,value:function(e){var t=a.state.form,r=e.dataTransfer.files;t.querySelector('input[type="file"]').files=r,_classPrivateFieldLooseBase(a,_changeFormForActionInp)[_changeFormForActionInp]()}}),Object.defineProperty(this,_changeFormForActionInp,{writable:!0,value:function(){var e=a.state.form;a.state.action=!0,e.classList.add("drag-and-drop__action"),e.querySelector("label").innerHTML="Файл Загружен!"}}),Object.defineProperty(this,_removeFiles,{writable:!0,value:function(e){var t=a.state,r=t.action,o=t.form,i=t.message;r&&(o.classList.remove("drag-and-drop__remove"),o.classList.remove("drag-and-drop__action"),o.querySelector("label").innerHTML=i,o.querySelector('input[type="file"]').value="",a.state.action=!1,e.preventDefault())}}),Object.defineProperty(this,_showRemoveFiles,{writable:!0,value:function(){var e=a.state,t=e.action,r=e.form;t&&(r.classList.add("drag-and-drop__remove"),r.querySelector("label").innerHTML="Удалить файл")}}),Object.defineProperty(this,_unshowRemoveFiles,{writable:!0,value:function(){var e=a.state,t=e.action,r=e.form;t&&(r.classList.remove("drag-and-drop__remove"),r.querySelector("label").innerHTML="Файл Загружен!")}}),this.init(t,r,o),this.state.el.appendChild(this.state.form),_classPrivateFieldLooseBase(this,_createEvents)[_createEvents]()},_createForm=_classPrivateFieldLooseKey("createForm"),_createEvents=_classPrivateFieldLooseKey("createEvents"),_preventDefaults=_classPrivateFieldLooseKey("preventDefaults"),_highlight=_classPrivateFieldLooseKey("highlight"),_unhighlight=_classPrivateFieldLooseKey("unhighlight"),_handleDrop=_classPrivateFieldLooseKey("handleDrop"),_changeFormForActionInp=_classPrivateFieldLooseKey("changeFormForActionInp"),_removeFiles=_classPrivateFieldLooseKey("removeFiles"),_showRemoveFiles=_classPrivateFieldLooseKey("showRemoveFiles"),_unshowRemoveFiles=_classPrivateFieldLooseKey("unshowRemoveFiles");