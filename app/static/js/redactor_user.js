"use strict";for(var bth=document.querySelector("#redactionUser"),form=document.querySelector("#formUser"),inp_number=document.querySelectorAll('input[type="number"].jsInputForm'),i=0;i<inp_number.length;i++)inp_number[i].addEventListener("blur",function(e){var t=e.target;+t.value<+t.min&&(t.value=t.min),+t.value>+t.max&&(t.value=t.max)});bth.addEventListener("click",function(){editor.save().then(function(e){getForm([{name:"about_us",value:e.blocks}])}).catch(function(e){alert("Saving failed: ",e)})});var getForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={type:global_edit_name};e&&e.forEach(function(e){var n=e.name,a=e.value;console.log(n),t[n]=a});for(var n=form.querySelectorAll(".jsInputForm"),a=0;a<n.length;a++){var r=n[0].parentNode.dataset.name;switch(n[a].type){case"text":t[r]||(t[r]={}),t[r][n[a].name]=n[a].value;break;case"radio":t[r]||(t[r]={}),n[a].checked&&(t[r][n[a].name]=n[a].value);break;case"number":if(!n[a].value)break;t[r]||(t[r]={}),+n[a].value<+n[a].min?t[r][n[a].name]=n[a].min:+n[a].value>+n[a].max?t[r][n[a].name]=n[a].max:t[r][n[a].name]=+n[a].value}}sendMessage("/todo/edit_profile",t)},sendMessage=function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(t)),n.onreadystatechange=function(){4==n.readyState&&(200!=n.status?console.log(n.status+": "+n.statusText):console.log(n.responseText))}};