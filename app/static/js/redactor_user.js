"use strict";for(var bth=document.querySelector("#redactionUser"),form=document.querySelector("#formUser"),inp_number=document.querySelectorAll('input[type="number"].jsInputForm'),i=0;i<inp_number.length;i++)inp_number[i].addEventListener("blur",function(e){var t=e.target;+t.value<+t.min&&(t.value=t.min),+t.value>+t.max&&(t.value=t.max)});bth.addEventListener("click",function(){editor.save().then(function(e){getForm([{name:"about_us",value:e.blocks}])}).catch(function(e){alert("Saving failed: ",e)})});var getForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={type:global_edit_name};e&&e.forEach(function(e){var a=e.name,n=e.value;t[a]=n});for(var a=form.querySelectorAll(".jsInputForm"),n=0;n<a.length;n++){var r=a[n].parentNode.dataset.name;switch(a[n].type){case"text":t[r]||(t[r]={}),t[r][a[n].name]=a[n].value;break;case"radio":t[r]||(t[r]={}),a[n].checked&&(t[r][a[n].name]=a[n].value);break;case"number":if(!a[n].value)break;t[r]||(t[r]={}),+a[n].value<+a[n].min?t[r][a[n].name]=a[n].min:+a[n].value>+a[n].max?t[r][a[n].name]=a[n].max:t[r][a[n].name]=+a[n].value}}sendMessage("/todo/edit_profile",t)},sendMessage=function(e,t){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(t)),a.onreadystatechange=function(){4==a.readyState&&(200!=a.status?console.log(a.status+": "+a.statusText):(alert("Ваши изменения сохранены. Они в ближайшее время будут доступны всем."),console.log(a.responseText)))}};